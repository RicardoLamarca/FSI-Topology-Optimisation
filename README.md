Navier-Stokes Immersed Body Topology Optimization

A self-contained Julia script for performing 2D Topology Optimization on structures immersed in Navier-Stokes fluid flow.

This project uses the Method of Moving Asymptotes (MMA) to optimize the material distribution of a body to minimize compliance (maximize stiffness) under fluid-structure interaction loads.

Key Features

Zero-Config Windows Support: Automatically detects Windows environments and pins P4est_jll to version 2.8.1 to prevent binary incompatibility crashes common with GridapTopOpt.

Self-Contained Architecture: All necessary solver logic, Finite Element state maps, and optimization functionals are included in a single file. No need to struggle with local package development or version conflicts.

Automated Dependency Setup: The script automatically installs all required Julia packages (Gridap, NLopt, WriteVTK, etc.) on the first run.

Navier-Stokes Fluid Load: Computes fluid loads dynamically on the solid interface.

Prerequisites

Julia (Version 1.7 or higher recommended).

Gmsh: To generate the .msh mesh files used for the simulation.

ParaView: To visualize the optimization results (.vtu files).

Installation & Usage

Clone the Repository

Prepare your Mesh

Ensure you have a valid 2D .msh file generated by Gmsh. The script expects specific tags for boundary conditions ("outlet", "inlet", "noSlip", "fluid", "solid", and "interface").

Configure the Script
Open 2DFSITOPOPT.jl in your text editor. Scroll to the very bottom (line 930) to find the Execution block.

Modify the mesh_file_path to point to your mesh file.

You can also tweak the optimization parameters in the NavierImmersedBodyMain (line 814) and the fluid flow parameters in the compute_navier_stokes_load (line 765).

Run the Script
Run the file using Julia:

julia 2DFSITOPOPT.jl

Note: The first run may take 5-10 minutes as the script identifies your OS, installs specific compatible library versions, and precompiles the physics engine. Subsequent runs will be faster.

Visualizing Results

The simulation outputs .vtu files to the ./results folder (or the path you configured).

Open ParaView.

Open the generated file series (e.g., navier_opt_..vtu, Fluid_sol).

Visualize the following fields:

œÅh (Density): The material distribution. 1.0 is solid, 0.0 is void.

uh (Displacement): The deformation of the structure.

ph (Pressure): The fluid pressure field.
